import React from 'react';
import { Layout, Menu, Button, Space, Avatar, Dropdown, Badge } from 'antd';
import { Link, Outlet, useNavigate } from 'umi';
import { 
  HomeOutlined, 
  ShoppingOutlined, 
  ShoppingCartOutlined, 
  UserOutlined, 
  SearchOutlined,
  BellOutlined,
  HeartOutlined,
  MenuOutlined
} from '@ant-design/icons';

const { Header, Content, Footer } = Layout;

const GlobalLayout: React.FC = () => {
  const navigate = useNavigate();

  const userMenuItems = [
    {
      key: 'profile',
      label: <Link to="/customer/profile">My Profile</Link>,
    },
    {
      key: 'orders',
      label: <Link to="/customer/orders">My Orders</Link>,
    },
    {
      key: 'wishlist',
      label: <Link to="/customer/wishlist">Wishlist</Link>,
    },
    {
      key: 'divider1',
      type: 'divider' as const,
    },
    {
      key: 'admin',
      label: <Link to="/admin">Admin Panel</Link>,
    },
    {
      key: 'vendor',
      label: <Link to="/vendor">Vendor Panel</Link>,
    },
    {
      key: 'divider2',
      type: 'divider' as const,
    },
    {
      key: 'logout',
      label: 'Logout',
    },
  ];

  return (
    <Layout style={{ minHeight: '100vh' }}>
      <Header style={{ 
        position: 'fixed', 
        zIndex: 1000, 
        width: '100%', 
        display: 'flex', 
        alignItems: 'center',
        padding: '0 24px',
        backgroundColor: '#232F3E'
      }}>
        <div style={{ display: 'flex', alignItems: 'center', width: '100%' }}>
          {/* Logo */}
          <div style={{ marginRight: 40 }}>
            <Link to="/">
              <span style={{ 
                color: 'white', 
                fontSize: '24px', 
                fontWeight: 'bold',
                textDecoration: 'none'
              }}>
                GROOW
              </span>
            </Link>
          </div>

          {/* Main Navigation */}
          <Menu
            theme="dark"
            mode="horizontal"
            style={{ 
              flex: 1, 
              backgroundColor: 'transparent',
              border: 'none'
            }}
            items={[
              {
                key: 'home',
                icon: <HomeOutlined />,
                label: <Link to="/">Home</Link>,
              },
              {
                key: 'products',
                icon: <ShoppingOutlined />,
                label: <Link to="/products">Products</Link>,
              },
              {
                key: 'categories',
                label: <Link to="/categories">Categories</Link>,
              },
              {
                key: 'help',
                label: <Link to="/help-center">Help</Link>,
              },
              {
                key: 'contact',
                label: <Link to="/contact">Contact</Link>,
              },
            ]}
          />

          {/* Right Side Actions */}
          <Space size="middle" style={{ marginLeft: 'auto' }}>
            <Button 
              type="text" 
              icon={<SearchOutlined />} 
              style={{ color: 'white' }}
            />
            
            <Badge count={3}>
              <Button 
                type="text" 
                icon={<BellOutlined />} 
                style={{ color: 'white' }}
              />
            </Badge>

            <Badge count={2}>
              <Button 
                type="text" 
                icon={<HeartOutlined />} 
                style={{ color: 'white' }}
                onClick={() => navigate('/customer/wishlist')}
              />
            </Badge>

            <Badge count={5}>
              <Button 
                type="text" 
                icon={<ShoppingCartOutlined />} 
                style={{ color: 'white' }}
                onClick={() => navigate('/cart')}
              />
            </Badge>

            <Dropdown 
              menu={{ items: userMenuItems }}
              placement="bottomRight"
              trigger={['click']}
            >
              <Button 
                type="text" 
                icon={<UserOutlined />} 
                style={{ color: 'white' }}
              >
                Account
              </Button>
            </Dropdown>
          </Space>
        </div>
      </Header>

      <Content style={{ marginTop: 64, minHeight: 'calc(100vh - 64px - 70px)' }}>
        <Outlet />
      </Content>

      <Footer style={{ 
        textAlign: 'center', 
        backgroundColor: '#232F3E', 
        color: 'white',
        padding: '24px 0'
      }}>
        <div style={{ maxWidth: 1200, margin: '0 auto', padding: '0 24px' }}>
          <div style={{ marginBottom: 16 }}>
            <Space size="large">
              <Link to="/about" style={{ color: 'white' }}>About Us</Link>
              <Link to="/contact" style={{ color: 'white' }}>Contact</Link>
              <Link to="/privacy" style={{ color: 'white' }}>Privacy Policy</Link>
              <Link to="/terms" style={{ color: 'white' }}>Terms of Service</Link>
              <Link to="/help-center" style={{ color: 'white' }}>Help Center</Link>
            </Space>
          </div>
          <div>
            GROOW E-Commerce Platform ©2025 Created with ❤️
          </div>
        </div>
      </Footer>
    </Layout>
  );
};

export default GlobalLayout;
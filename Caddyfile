# askDestinPQ Frontend
ask.destinpq.com {
    reverse_proxy localhost:3847
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# askDestinPQ API
ask-api.destinpq.com {
    reverse_proxy localhost:5692
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# Presentation Builder Frontend
presentation.destinpq.com {
    reverse_proxy localhost:7231
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# Presentation Builder API
presentation-api.destinpq.com {
    reverse_proxy localhost:8934
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# PsyWeb Frontend
www.drakanksha.com {
    reverse_proxy localhost:4576
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# PsyWeb API
www.drakanksha-api.com {
    reverse_proxy localhost:6183
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# ReAlign Frontend
realign.destinpq.com {
    reverse_proxy localhost:9428
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# ReAlign API
realign-api.destinpq.com {
    reverse_proxy localhost:2759
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# Comics Frontend
comics.destinpq.com {
    reverse_proxy localhost:5014
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# Comics API
comics-api.destinpq.com {
    reverse_proxy localhost:8367
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# Santulan Frontend
santulan.destinpq.com {
    reverse_proxy localhost:3125
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# Santulan API
santulan-api.destinpq.com {
    reverse_proxy localhost:7649
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# EcoPulse Frontend
ecopulse.destinpq.com {
    reverse_proxy localhost:4129
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# EcoPulse API
ecopulse-api.destinpq.com {
    reverse_proxy localhost:6574
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# EcoTracker Frontend
ecotracker.destinpq.com {
    reverse_proxy localhost:8452
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}

# EcoTracker API
ecotracker-api.destinpq.com {
    reverse_proxy localhost:9217
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# Groow E-Commerce Platform - Backend API
groow-api.destinpq.com {
    reverse_proxy localhost:21440
    encode gzip
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
    }
}

# Groow E-Commerce Platform - Frontend
groow.destinpq.com {
    reverse_proxy http://localhost:21441
    encode gzip
    
    # Force no-cache for HTML files (prevents chunk hash mismatches)
    @html {
        path *.html /
    }
    header @html {
        Cache-Control "no-store, no-cache, must-revalidate, proxy-revalidate"
        Pragma "no-cache"
        Expires "0"
    }
    
    # Cache JS/CSS files with hash (they're versioned)
    @static {
        path *.js *.css *.woff *.woff2 *.ttf *.eot
    }
    header @static {
        Cache-Control "public, max-age=31536000, immutable"
    }
    
    # Security headers for all responses
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}
        Expires "0"
    }
    
    # Cache JS/CSS files with hash (they're versioned)
    @static {
        path *.js *.css *.woff *.woff2 *.ttf *.eot
    }
    header @static {
        Cache-Control "public, max-age=31536000, immutable"
    }
    
    # Security headers for all responses
    header {
        X-Frame-Options "SAMEORIGIN"
        X-XSS-Protection "1; mode=block"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer-when-downgrade"
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    }
}